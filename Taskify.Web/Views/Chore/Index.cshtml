@model dynamic

@{
    ViewBag.Title = "Tasks";
}

<h2>All the tasks</h2>

<div id="choresDiv">
    <table class="table table-hover">
        <thead>
            <tr>
                <td>Name</td>
                <td>Deadline</td>
                <td>Status</td>
            </tr>
        </thead>
        <tbody data-bind="foreach: chores">
            <tr>
                <td data-bind="text: Name"></td>
                <td data-bind="text: DeadLine"></td>
                <td data-bind="text: Status"></td>
                <td><button class="btn btn-default" data-bind="click: $parent.editClick">Edit</button></td>
            </tr>
        </tbody>
    </table>
</div>

@section scripts
{
    <script>
        var model = @Html.Raw(Json.Encode(Model));

        var choresListViewModel = function() {
            var self = this;
            self.chores = ko.observableArray(model);

            self.editClick = function(chore) {
                changeLocation("../Chore/Edit/" + chore.Id);
            }
        }

        ko.applyBindings(new choresListViewModel(), document.getElementById("choresDiv"));
    </script>
}
